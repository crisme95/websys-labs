var all,daily_play,found,guess,points,rank1,rank2,rank3,rank4,rank5,rank6,rank7,rank8,rank9,replaying,total,todaytotal,yesterdaytotal,win,words,todaywords,yesterdaywords,dark,foundlist=[],letters=[],todayletters=[],wordlist=[],todaywordlist=[],yesterdaywordlist=[];function darkmode(){if(1==dark){for(var e=document.querySelectorAll("*"),t=0;t<e.length;t++)"fg"!=e[t].className&&"bg"!=e[t].className&&(e[t].style.background="#fbfcff",e[t].style.color="#243b4a");dark=0,localStorage.setItem("useDarkMode",1)}else{for(e=document.querySelectorAll("*"),t=0;t<e.length;t++)"fg"!=e[t].className&&"bg"!=e[t].className&&(e[t].style.background="#111111",e[t].style.color="white");dark=1,localStorage.setItem("useDarkMode",0)}}function setDisplay(e,t){for(var n=0;n<e.length;n++)document.getElementById(e[n]).style.display=t[n]}function setStyle(e,t,n,o,l){document.getElementById(e).style.height=t,document.getElementById(e).style.width=n,document.getElementById(e).style.left=o,document.getElementById(e).style.top=l}function type(e,t){setDisplay(["no-message","pangram","already-found","center-letter","too-short","not-in-list"],["inline","none","none","none","none","none"]),document.getElementById("comb"+t).style.height="80px",document.getElementById("comb"+t).style.width="80px",document.getElementById("comb"+t).style.left=parseInt(document.getElementById("comb"+t).style.left)+10+"px",document.getElementById("comb"+t).style.top=parseInt(document.getElementById("comb"+t).style.top)+10+"px",document.getElementById("guess").value=document.getElementById("guess").value+e}function untype(){setStyle("comb1","100px","100px","1px","51px"),setStyle("comb2","100px","100px","80px","1px"),setStyle("comb3","100px","100px","159px","51px"),setStyle("comb4","100px","100px","1px","149px"),setStyle("comb5","100px","100px","80px","199px"),setStyle("comb6","100px","100px","159px","149px"),setStyle("comb7","100px","100px","80px","100px")}function setPlay(e,t,n,o,l,s,a){"play7"==e?(document.getElementById(e).ontouchstart=function(){a=1,type(letters[t][1],n)},document.getElementById(e).onmousedown=function(){1!=a&&type(letters[t][1],n)}):(document.getElementById(e).ontouchstart=function(){a=1,type(letters[t],n)},document.getElementById(e).onmousedown=function(){1!=a&&type(letters[t],n)}),document.getElementById(e).src=letters[t]+"-min.png",document.getElementById(e).style.left=o,document.getElementById(e).style.top=l,document.getElementById(e).style.display=s,document.getElementById(e).onmouseup=function(){untype()},document.getElementById(e).ondragend=function(){untype()},document.getElementById(e).ontouchend=function(){untype()},document.getElementById(e).ontouchcancel=function(){untype()}}function display(){setPlay("play1",0,1,"21px","51px","block",0),setPlay("play2",1,2,"100px","1px","block",0),setPlay("play3",2,3,"179px","51px","block",0),setPlay("play4",3,4,"21px","149px","block",0),setPlay("play5",4,5,"100px","199px","block",0),setPlay("play6",5,6,"179px","149px","block",0),setPlay("play7",6,7,"100px","100px","block",0)}function update_rank(){var e=rank9<=points?(0==win&&(alert("You earned the rank of Queen Bee!\n\nCan you find all the words?"),win=1),"Queen Bee!"):rank8<=points?"Outstanding":rank7<=points?"Marvellous":rank6<=points?"Superb":rank5<=points?"Excellent":rank4<=points?"Skilled":rank3<=points?"Fine":rank2<=points?"Novice":"Newbie";document.getElementById("rank-update").innerHTML=e}function set_rank(){rank1=0,rank2=Math.floor(.02*total),rank3=Math.floor(.05*total),rank4=Math.floor(.08*total),rank5=Math.floor(.15*total),rank6=Math.floor(.25*total),rank7=Math.floor(.4*total),rank8=Math.floor(.5*total),rank9=Math.floor(.7*total)}function save_word(){localStorage.setItem("foundwords",JSON.stringify(foundlist))}function add_points(){var e=0,t=0,n=0,o=0,l=0,s=0,a=0,r=0;if(1===daily_play&&save_word(),(a=guess.length)<7)return 4==a&&(a=1),void(points+=a);for(a=0;a<guess.length;){for(r=0;r<7;r++)guess[a]==letters[r]&&(0==r&&(e=1),1==r&&(t=1),2==r&&(n=1),3==r&&(o=1),4==r&&(l=1),5==r&&(s=1));a+=1}if(1==e&&1==t&&1==n&&1==o&&1==l&&1==s)return points=points+guess.length+7,document.getElementById("no-message").style.display="none",void(document.getElementById("pangram").style.display="inline");points+=guess.length}function found_word(){for(var e=0;e<found;e++)if(guess==foundlist[e])return document.getElementById("no-message").style.display="none",document.getElementById("already-found").style.display="inline",1;return foundlist.push(guess),found+=1,add_points(),document.getElementById("points-update").innerHTML=points,document.getElementById("answers-update").innerHTML=foundlist.join("<br />"),update_rank(),found==words&&(alert("Congratulations! You found all the words!"),all=1),0}function check(){var e,t=0;for(setDisplay(["no-message","pangram","already-found","center-letter","too-short","not-in-list"],["inline","none","none","none","none","none"]),0===replaying?(guess=document.getElementById("guess").value.toLowerCase(),document.getElementById("player-guess").reset()):guess=guess.toLowerCase(),e=0;e<guess.length;e++)"7"+guess[e]==letters[6]&&(t=1);if(guess.length<4)return document.getElementById("no-message").style.display="none",document.getElementById("too-short").style.display="inline",1;if(0==t)return document.getElementById("no-message").style.display="none",document.getElementById("center-letter").style.display="inline",1;for(e=0;e<words;e++)if(guess==wordlist[e])return e=found_word();return document.getElementById("no-message").style.display="none",document.getElementById("not-in-list").style.display="inline",1}function replay_words(){var e,t;for(replaying=1,t=JSON.parse(localStorage.getItem("foundwords")),localStorage.removeItem("foundwords"),e=0;e<t.length;e++)if(guess=t[e],1==check()){for(localStorage.removeItem("foundwords"),e=0;e<found;e++)foundlist.pop();return rank="Newbie",win=points=found=all=0,setDisplay(["no-message","pangram","already-found","center-letter","too-short","not-in-list"],["inline","none","none","none","none","none"]),void(replaying=0)}setDisplay(["no-message","pangram","already-found","center-letter","too-short","not-in-list"],["inline","none","none","none","none","none"]),replaying=0}function updateStats(e,t,n,o,l){document.getElementById("points-update").innerHTML=e,document.getElementById("answers-update").innerHTML=t.join("<br />"),document.getElementById("rank-update").innerHTML=n,document.getElementById("yesterday-or-random").innerHTML=o,document.getElementById("update-random").innerHTML=l}function daily(){var e;for(daily_play=1,e=0;e<found;e++)foundlist.pop();rank="Newbie",win=replaying=points=found=all=0,updateStats(points,foundlist,rank,"Yesterday's answers",""),document.getElementById("restart-daily-button").style.visibility="hidden";setDisplay(["random-answers","no-message","pangram","already-found","center-letter","too-short","not-in-list","play1","play2","play3","play4","play5","play6","play7"],["none","inline","none","none","none","none","none","none","none","none","none","none","none","none"]),letters[0]=todayletters[0],letters[1]=todayletters[1],letters[2]=todayletters[2],letters[3]=todayletters[3],letters[4]=todayletters[4],letters[5]=todayletters[5],letters[6]=todayletters[6],words=todaywords,total=todaytotal,wordlist=todaywordlist,set_rank(),!0===localStorage.hasOwnProperty("foundwords")&&replay_words(),document.getElementById("update-random").innerHTML=yesterdaywordlist.join("<br />")+"<br /><br />Total words:  "+yesterdaywords+"<br />Total points: "+yesterdaytotal+"<br />Points for Queen Bee: "+Math.floor(.7*yesterdaytotal),display()}function get_yesterday(){var e=new XMLHttpRequest;e.onreadystatechange=function(){var e;4==this.readyState&&200==this.status&&(e=JSON.parse(this.responseText),yesterdaywords=e.words,yesterdaytotal=e.total,yesterdaywordlist=e.wordlist)},e.open("GET","yesterday",!0),e.send()}function get_today(){var e=new XMLHttpRequest;e.onreadystatechange=function(){var e;4==this.readyState&&200==this.status&&(e=JSON.parse(this.responseText),todayletters[0]=e.letters[0],todayletters[1]=e.letters[1],todayletters[2]=e.letters[2],todayletters[3]=e.letters[3],todayletters[4]=e.letters[4],todayletters[5]=e.letters[5],todayletters[6]="7"+e.center,todaywords=e.words,todaytotal=e.total,todaywordlist=e.wordlist,daily())},e.open("GET","today",!0),e.send()}function shuffle(){for(var e,t,n=5;0<n;n--)e=Math.floor(Math.random()*(n+1)),t=letters[e],letters[e]=letters[n],letters[n]=t;display()}function random(){for(var e=new XMLHttpRequest,t=daily_play=0;t<found;t++)foundlist.pop();rank="Newbie",win=points=found=all=0,updateStats(points,foundlist,rank,"Answers","");setDisplay(["no-message","pangram","already-found","center-letter","too-short","not-in-list","play1","play2","play3","play4","play5","play6","play7"],["inline","none","none","none","none","none","none","none","none","none","none","none","none"]),e.onreadystatechange=function(){var e;4==this.readyState&&200==this.status&&(e=JSON.parse(this.responseText),letters[0]=e.letters[0],letters[1]=e.letters[1],letters[2]=e.letters[2],letters[3]=e.letters[3],letters[4]=e.letters[4],letters[5]=e.letters[5],letters[6]="7"+e.center,words=e.words,total=e.total,wordlist=e.wordlist,set_rank(),display(),document.getElementById("random-answers").style.display="block",document.getElementById("restart-daily-button").style.visibility="visible")},e.open("GET","../../cgi-bin/random",!0),e.send()}function show_random(){document.getElementById("update-random").innerHTML=wordlist.join("<br />")+"<br /><br />Total words:  "+words+"<br />Total points: "+total+"<br />Points for Queen Bee: "+Math.floor(.7*total)}function delete_letter(){var e=(t=document.getElementById("guess").value).length,t=t.slice(0,e-1)+t.slice(e,e);document.getElementById("guess").value=t}window.onload=function(){setStyle("comb1","100px","100px","1px","51px"),setStyle("comb2","100px","100px","80px","1px"),setStyle("comb3","100px","100px","159px","51px"),setStyle("comb4","100px","100px","1px","149px"),setStyle("comb5","100px","100px","80px","199px"),setStyle("comb6","100px","100px","159px","149px"),setStyle("comb7","100px","100px","80px","100px"),get_yesterday(),get_today(),dark=!0===localStorage.hasOwnProperty("useDarkMode")?Number(localStorage.getItem("useDarkMode")):1,darkmode()};